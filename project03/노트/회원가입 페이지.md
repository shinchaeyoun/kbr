main.jsx êµ¬ì¡°
```
import React, { StrictMode } from "react";
import { BrowserRouter, Routes, Route } from "react-router-dom";

import { createRoot } from "react-dom/client";
import "./index.css";
import GlobalStyle from "./styled/GlobalStyle.jsx";
import App from "./App.jsx";
import PrivateEnterRoute from "./components/PrivateEnterRoute.jsx";
import Header from "./components/Header.jsx";
import Footer from "./components/Footer.jsx";

createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <BrowserRouter>
      <GlobalStyle />
      {/* <App /> */}
      <PrivateEnterRoute />
      {/* <Footer /> */}
    </BrowserRouter>
  </React.StrictMode>
);
```

<br/>
<br/>

PrivateEnterRoute í˜ì´ì§€ êµ¬ì¡°
```
import React, { useState, useEffect } from "react";
import App from "../App.jsx";
import Login from "../pages/Login.jsx";
import Signup from "../pages/Signup.jsx";
import ApprovalPendingScreen from "./ApprovalPendingScreen.jsx";

const PrivateEnterRoute = () => {
  const level = Number(sessionStorage.user_lvl) || 0;
  const [showSignup, setShowSignup] = useState(false);

  console.log("level", level);

  // 1. levelì´ 1ì´ë©´ ìŠ¹ì¸ ëŒ€ê¸° í™”ë©´ í‘œì‹œ
  if (level === 1) {
    return <ApprovalPendingScreen />;
  }

  // 2. levelì´ 1ë³´ë‹¤ ì‘ê±°ë‚˜ 0ì¼ ê²½ìš° Login ë˜ëŠ” Signupìœ¼ë¡œë§Œ ì´ë™ ê°€ëŠ¥
  if (level < 1) {
    return showSignup ? (
      <Signup />
    ) : (
      <Login onSignupClick={() => setShowSignup(true)} />
    );
  }

  // return level >= 2 ? <App level={level} /> : <Login />;
  
  // 3. levelì´ 2 ì´ìƒì¼ ê²½ìš° Appìœ¼ë¡œ ì´ë™
  return <App level={level} />;
};

export default PrivateEnterRoute;
```


<br/><br/>
ì´ ìƒíƒœì—ì„œ ë¡œê·¸ì¸














=================

ë¦¬ì•¡íŠ¸ë¡œ **ê¶Œí•œì´ ìˆëŠ” íšŒì›ë§Œ ë³¼ ìˆ˜ ìˆëŠ” í™ˆí˜ì´ì§€**ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” **ê¶Œí•œ ê´€ë¦¬**ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” íš¨ìœ¨ì ì¸ êµ¬ì„± ë°©ë²•ê³¼ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ ê°€ì´ë“œì…ë‹ˆë‹¤:

---

### 1. **ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡° ì„¤ê³„**
ë¨¼ì € ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ì—¬, ê° ì»´í¬ë„ŒíŠ¸ê°€ ì—­í• ì— ë”°ë¼ ë™ì‘í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.

#### ê¸°ë³¸ êµ¬ì¡°:
1. **`App` ì»´í¬ë„ŒíŠ¸**: ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì»¨í…Œì´ë„ˆ.
2. **`AuthProvider` ì»´í¬ë„ŒíŠ¸**: ì‚¬ìš©ìì˜ ê¶Œí•œ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œê³µì.
3. **`ProtectedRoute` ì»´í¬ë„ŒíŠ¸**: ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²½ë¡œë¥¼ ì²˜ë¦¬.
4. **í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸**: `Home`, `Dashboard`, `Login` ë“± ê° í˜ì´ì§€ ì—­í• .
5. **ê¸°íƒ€ ê³µí†µ ì»´í¬ë„ŒíŠ¸**: ë„¤ë¹„ê²Œì´ì…˜ ë°”, í—¤ë”, í‘¸í„° ë“±.

---

### 2. **ê¶Œí•œ ê´€ë¦¬ ë¡œì§**
Reactì˜ **Context API** ë˜ëŠ” **React Redux**ë¥¼ ì‚¬ìš©í•´ ì „ì—­ ìƒíƒœë¡œ ì‚¬ìš©ì ê¶Œí•œ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

#### ì˜ˆì‹œ: `AuthProvider` ì»´í¬ë„ŒíŠ¸
```javascript
import React, { createContext, useState, useContext } from "react";

const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [isAuthenticated, setIsAuthenticated] = useState(false); // ì¸ì¦ ìƒíƒœ ê´€ë¦¬
  const [userRole, setUserRole] = useState(null); // ì‚¬ìš©ì ì—­í•  (ì˜ˆ: 'admin', 'member')

  const login = (role) => {
    setIsAuthenticated(true);
    setUserRole(role);
  };

  const logout = () => {
    setIsAuthenticated(false);
    setUserRole(null);
  };

  return (
    <AuthContext.Provider value={{ isAuthenticated, userRole, login, logout }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => useContext(AuthContext);
```

---

### 3. **ê¶Œí•œì— ë”°ë¥¸ ì ‘ê·¼ ì œí•œ**
`ProtectedRoute`ë¥¼ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  í˜ì´ì§€ ì ‘ê·¼ì„ ì œí•œí•©ë‹ˆë‹¤.

#### ì˜ˆì‹œ: `ProtectedRoute` ì»´í¬ë„ŒíŠ¸
```javascript
import React from "react";
import { Navigate } from "react-router-dom";
import { useAuth } from "./AuthProvider";

const ProtectedRoute = ({ children, requiredRole }) => {
  const { isAuthenticated, userRole } = useAuth();

  if (!isAuthenticated) {
    return <Navigate to="/login" />; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
  }

  if (requiredRole && userRole !== requiredRole) {
    return <Navigate to="/unauthorized" />; // ê¶Œí•œ ë¶€ì¡± í˜ì´ì§€ë¡œ ì´ë™
  }

  return children;
};

export default ProtectedRoute;
```

---

### 4. **ë¼ìš°íŒ… ì„¤ì •**
React Routerë¥¼ í™œìš©í•˜ì—¬ ê° í˜ì´ì§€ë¥¼ ê¶Œí•œì— ë”°ë¼ í‘œì‹œí•©ë‹ˆë‹¤.

#### ì˜ˆì‹œ: ë¼ìš°íŒ… ì„¤ì •
```javascript
import React from "react";
import { BrowserRouter as Router, Route, Routes } from "react-router-dom";
import { AuthProvider } from "./AuthProvider";
import ProtectedRoute from "./ProtectedRoute";
import Home from "./Home";
import Dashboard from "./Dashboard";
import Login from "./Login";
import Unauthorized from "./Unauthorized";

const App = () => {
  return (
    <AuthProvider>
      <Router>
        <Routes>
          <Route path="/login" element={<Login />} />
          <Route path="/" element={<Home />} />
          <Route
            path="/dashboard"
            element={
              <ProtectedRoute requiredRole="admin">
                <Dashboard />
              </ProtectedRoute>
            }
          />
          <Route path="/unauthorized" element={<Unauthorized />} />
        </Routes>
      </Router>
    </AuthProvider>
  );
};

export default App;
```

---

### 5. **í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸**
ê° í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—­í• ì— ë”°ë¼ ì‘ì„±í•©ë‹ˆë‹¤.

#### `Dashboard` í˜ì´ì§€
```javascript
import React from "react";

const Dashboard = () => {
  return <h1>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>;
};

export default Dashboard;
```

#### `Unauthorized` í˜ì´ì§€
```javascript
import React from "react";

const Unauthorized = () => {
  return <h1>ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤.</h1>;
};

export default Unauthorized;
```

---

### 6. **ë¡œê·¸ì¸ ì²˜ë¦¬**
ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ì‚¬ìš©ìì˜ ê¶Œí•œê³¼ ì¸ì¦ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

#### `Login` ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ:
```javascript
import React from "react";
import { useAuth } from "./AuthProvider";
import { useNavigate } from "react-router-dom";

const Login = () => {
  const { login } = useAuth();
  const navigate = useNavigate();

  const handleLogin = () => {
    login("admin"); // ì‚¬ìš©ì ì—­í•  ì„¤ì •
    navigate("/dashboard"); // ë¡œê·¸ì¸ í›„ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
  };

  return (
    <div>
      <h1>ë¡œê·¸ì¸ í˜ì´ì§€</h1>
      <button onClick={handleLogin}>ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸</button>
    </div>
  );
};

export default Login;
```

---

### ê¶Œì¥ ì»´í¬ë„ŒíŠ¸ êµ¬ì„±:
1. **`AuthProvider`**: ì¸ì¦ ìƒíƒœ ë° ê¶Œí•œ ê´€ë¦¬.
2. **`ProtectedRoute`**: ê¶Œí•œ í™•ì¸ ë° ì ‘ê·¼ ì œí•œ ì²˜ë¦¬.
3. **ë¼ìš°íŠ¸ ì„¤ì •**: ê° í˜ì´ì§€ë¥¼ ê¶Œí•œì— ë”°ë¼ ë¶„ê¸°.
4. **í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸**: ì—­í• ë³„ë¡œ êµ¬í˜„ëœ Home, Dashboard, Login ë“±.

---

ì´ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ë©´ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©ì ê¶Œí•œì„ ê´€ë¦¬í•˜ê³ , ê¶Œí•œ ê¸°ë°˜ìœ¼ë¡œ í˜ì´ì§€ ì ‘ê·¼ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¶”ê°€ë¡œ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ì„¸ë¶€ êµ¬í˜„ì´ í•„ìš”í•˜ë©´ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸ˜Š


======

ê¶Œí•œì—†ìŒ ì•Œë¦¼ì´ë‚˜ í˜ì´ì§€ë¡œ ì´ë™í•´ì•¼í•˜ëŠ”ë° ë¡œê·¸ì¸ í˜ì´ì§€ë§Œ ë³´ì—¬ì£¼ëŠ” ì¤‘


===========

03.21   

<br/><br/>

ì²˜ìŒ ë“¤ì–´ì˜¤ë©´ privateEnterì—ì„œ ë ˆë²¨ ê°’ í™•ì¸,   
ë ˆë²¨ 0 or undefined ì¼ ê²½ìš° ë¡œê·¸ì¸ and íšŒì›ê°€ì… í˜ì´ì§€
ë ˆë²¨ 1ì´ë©´ ìŠ¹ì¸ ëŒ€ê¸° í˜ì´ì§€
ë ˆë²¨ 2ì´ìƒì´ë©´ í™ˆ í™”ë©´ ë³´ì—¬ì£¼ê¸°. ëª¨ë“  í˜ì´ì§€ ì´ë™ ê°€ëŠ¥   
   
í˜ì´ì§€ ì´ë™ì€ ì»´í¬ë„ŒíŠ¸ x ë£¨íŠ¸ë¡œ ë§í¬ ì´ë™

---

## ì™„ì„±ëœ ì½”ë“œ

### PrivateEnterRoute.jsx
```
import React, { useState, useEffect } from "react";
import { Router, Routes, Route, Navigate } from "react-router-dom";
import App from "../App.jsx";
import Main from "../pages/Main.jsx";
import Login from "../pages/Login.jsx";
import Signup from "../pages/Signup.jsx";
import ApprovalPendingScreen from "./ApprovalPendingScreen.jsx";
import BoardList from "../pages/BoardList.jsx";
import ProtectedRoute from "../ProtectedRoute";
import { useAuth } from "../AuthProvider";

const PrivateEnterRoute = () => {
  const level = Number(sessionStorage.user_lvl) || 0;
  const [showSignup, setShowSignup] = useState(false);

  if (level < 1) {
    return showSignup ? (
      <>
        PrivateEnterRoute navigate to Signup
        <br />
        level : {level}
        <Navigate to="/signup" />
        <Signup setShowSignup={setShowSignup} />
      </>
    ) : (
      <>
        PrivateEnterRoute navigate to login
        <br />
        level : {level}
        <Navigate to="/login" />
        <Login onSignupClick={() => setShowSignup(true)} />
      </>
    );
  } else if (level === 1) {
    return <ApprovalPendingScreen />;
  }

  return (
    <>
      PrivateEnterRoute
      <br />
      level: {level}
      <App level={level} />
    </>
  );
};

export default PrivateEnterRoute;
```

ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.

---

### 1. **`level`ì˜ ì—­í• **
- `sessionStorage.user_lvl` ê°’ì„ ê°€ì ¸ì™€ ìˆ«ìë¡œ ë³€í™˜í•˜ê³ , ê°’ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ì„ `0`ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
- `level` ë³€ìˆ˜ëŠ” ì‚¬ìš©ìì˜ ê¶Œí•œ ë˜ëŠ” ì¸ì¦ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤:
  - `level < 1`: ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì… í•„ìš”.
  - `level === 1`: ìŠ¹ì¸ ëŒ€ê¸° ìƒíƒœ.
  - `level > 1`: ì •ìƒì ìœ¼ë¡œ ì¸ì¦ëœ ìƒíƒœ.

---

### 2. **`showSignup` ìƒíƒœ**
- `useState(false)`ë¥¼ ì‚¬ìš©í•´ ì´ˆê¸°ê°’ì€ `false`ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í™”ë©´ì—ì„œ íšŒì›ê°€ì… ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì´ ìƒíƒœê°€ `true`ë¡œ ë³€ê²½ë˜ì–´ íšŒì›ê°€ì… í™”ë©´ìœ¼ë¡œ ì „í™˜ë©ë‹ˆë‹¤.

ì´ ë¶€ë¶„ì—ì„œ ì• ë¨¹ì—ˆëŠ”ë°   
íšŒì›ê°€ì… í˜ì´ì§€ì—ì„œ ë¡œê·¸ì¸ í˜ì´ì§€ë‚˜ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë²„íŠ¼ì„ ì¶”ê°€í•˜ê³  `<Navigate to="/login" />`ì´ë‚˜ `<navigate=('/')>`ë¼ëŠ” ì½”ë“œê°€ ì‘ë™í•˜ì§€ ì•Šì•„ì„œ privateEnterRouteì—ì„œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë¡œë”©í•˜ì§€ ì•Šì•„ì„œ ê·¸ëŸ°ê°€ ì‹¶ì—ˆëŠ”ë°    
ë‹µì€ `useState(true)`ì— ìˆì—ˆë‹¤.
í•´ë‹¹ ìŠ¤í…Œì´íŠ¸ê°€ `true`ë¥¼ ë°˜í™˜í•˜ëŠ” ì¤‘ì´ë¼ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•´ë„ íšŒì›ê°€ì… í˜ì´ì§€ë¡œ ì´ë™ ì¤‘ì´ì—ˆë‹¤.   
ì´ì „ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ í•´ë‹¹ ìŠ¤í…Œì´íŠ¸ ê°’ì„ `false`ë¡œ ë³€ê²½í–ˆë‹¤.

---

### 3. **ì¡°ê±´ë³„ ë Œë”ë§ (if/else êµ¬ì¡°)**
#### (a) **`level < 1`**
- ì‚¬ìš©ìê°€ ì¸ì¦ë˜ì§€ ì•Šì€ ê²½ìš°, `showSignup` ìƒíƒœì— ë”°ë¼ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤:
  - **íšŒì›ê°€ì… í™”ë©´**:
    - `<Navigate to="/signup" />`: URLì„ `/signup`ìœ¼ë¡œ ë³€ê²½.
    - `<Signup />` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©°, `setShowSignup`ì„ í†µí•´ íšŒì›ê°€ì…/ë¡œê·¸ì¸ í™”ë©´ ê°„ ì „í™˜ì„ ì§€ì›.
  - **ë¡œê·¸ì¸ í™”ë©´**:
    - `<Navigate to="/login" />`: URLì„ `/login`ìœ¼ë¡œ ë³€ê²½.
    - `<Login />` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©°, ì‚¬ìš©ìê°€ íšŒì›ê°€ì… í™”ë©´ìœ¼ë¡œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ `onSignupClick` ì½œë°± ì œê³µ.

#### (b) **`level === 1`**
- ì‚¬ìš©ìê°€ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ìƒíƒœë©´, `<ApprovalPendingScreen />` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.

#### (c) **`level > 1`**
- ì‚¬ìš©ìê°€ ì •ìƒì ìœ¼ë¡œ ì¸ì¦ëœ ìƒíƒœë©´, `<App />` ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©° `level` ê°’ì„ ì „ë‹¬í•©ë‹ˆë‹¤.

---

### 4. **ì»´í¬ë„ŒíŠ¸ì˜ ë°˜í™˜ êµ¬ì¡°**
ì»´í¬ë„ŒíŠ¸ì˜ ìµœì¢… ì¶œë ¥ì€ ë‹¤ìŒê³¼ ê°™ì´ ë™ì‘í•©ë‹ˆë‹¤:
- ì¸ì¦ ìƒíƒœ(`level`)ì— ë”°ë¼ ì ì ˆí•œ í™”ë©´(íšŒì›ê°€ì…, ë¡œê·¸ì¸, ìŠ¹ì¸ ëŒ€ê¸°, ì•± í™”ë©´)ìœ¼ë¡œ ì‚¬ìš©ìë¥¼ ì´ë™ì‹œí‚µë‹ˆë‹¤.
- URL ë³€ê²½ì„ ìœ„í•´ `react-router-dom`ì˜ `<Navigate />`ë¥¼ í™œìš©í•©ë‹ˆë‹¤.

---
